DROP TABLE IF EXISTS `account_mounts`;
CREATE TABLE `account_mounts` (
  `accountId` INT(10) unsigned NOT NULL DEFAULT '0',
  `spell` MEDIUMINT(8) unsigned NOT NULL DEFAULT '0',
  `favorite` BOOL DEFAULT FALSE,
  PRIMARY KEY (`accountId`, `spell`)
);

DROP TABLE IF EXISTS `temp_mounts`;
CREATE TABLE `temp_mounts` (
  `spell` MEDIUMINT(8) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`spell`)
);

DELETE FROM `temp_mounts`;
INSERT INTO `temp_mounts` (`spell`) VALUES
(458),
(459),
(468),
(470),
(472),
(578),
(579),
(580),
(581),
(5784),
(6648),
(6653),
(6654),
(6777),
(6896),
(6898),
(6899),
(8394),
(8395),
(8980),
(10789),
(10793),
(10795),
(10796),
(10799),
(10873),
(10969),
(13819),
(15779),
(15780),
(16055),
(16056),
(16080),
(16081),
(16082),
(16083),
(16084),
(17229),
(17450),
(17453),
(17454),
(17459),
(17460),
(17461),
(17462),
(17463),
(17464),
(17465),
(17481),
(18363),
(18989),
(18990),
(18991),
(18992),
(22717),
(22718),
(22719),
(22720),
(22721),
(22722),
(22723),
(22724),
(23161),
(23214),
(23219),
(23221),
(23222),
(23223),
(23225),
(23227),
(23228),
(23229),
(23238),
(23239),
(23240),
(23241),
(23242),
(23243),
(23246),
(23247),
(23248),
(23249),
(23250),
(23251),
(23252),
(23338),
(23509),
(23510),
(24242),
(24252),
(25863),
(25953),
(26054),
(26055),
(26056),
(26655),
(26656),
(28828),
(30174),
(32235),
(32239),
(32240),
(32242),
(32243),
(32244),
(32245),
(32246),
(32289),
(32290),
(32292),
(32295),
(32296),
(32297),
(33630),
(33660),
(34406),
(34767),
(34769),
(34790),
(34795),
(34896),
(34897),
(34898),
(34899),
(35018),
(35020),
(35022),
(35025),
(35027),
(35028),
(35710),
(35711),
(35712),
(35713),
(35714),
(36702),
(37015),
(39315),
(39316),
(39317),
(39318),
(39319),
(39798),
(39800),
(39801),
(39802),
(39803),
(40192),
(41252),
(41513),
(41514),
(41515),
(41516),
(41517),
(41518),
(42776),
(42777),
(43688),
(43899),
(43900),
(43927),
(44151),
(44153),
(44317),
(44744),
(46197),
(46199),
(46628),
(48025),
(48027),
(48778),
(48954),
(49193),
(49322),
(49378),
(49379),
(51412),
(54729),
(54753),
(55164),
(55531),
(58615),
(58983),
(59567),
(59568),
(59569),
(59570),
(59571),
(59572),
(59650),
(59785),
(59788),
(59791),
(59793),
(59797),
(59799),
(59961),
(59976),
(59996),
(60002),
(60021),
(60024),
(60025),
(60114),
(60116),
(60118),
(60119),
(60136),
(60140),
(60424),
(61229),
(61230),
(61294),
(61309),
(61425),
(61447),
(61451),
(61465),
(61467),
(61469),
(61470),
(61996),
(61997),
(62048),
(63232),
(63635),
(63636),
(63637),
(63638),
(63639),
(63640),
(63641),
(63642),
(63643),
(63796),
(63844),
(63956),
(63963),
(64656),
(64657),
(64658),
(64659),
(64731),
(64927),
(64977),
(65439),
(65637),
(65638),
(65639),
(65640),
(65641),
(65642),
(65643),
(65644),
(65645),
(65646),
(65917),
(66087),
(66088),
(66090),
(66091),
(66122),
(66123),
(66124),
(66846),
(66847),
(66906),
(67336),
(67466),
(68056),
(68057),
(68187),
(68188),
(69395),
(69820),
(69826),
(71342),
(71810),
(72286),
(72807),
(72808),
(73313),
(73629),
(73630),
(74856),
(74918),
(75207),
(75596),
(75614),
(75973),
(84751),
(87090),
(87091),
(88331),
(88335),
(88718),
(88741),
(88742),
(88744),
(88746),
(88748),
(88749),
(88750),
(88990),
(90621),
(92155),
(92231),
(92232),
(93326),
(93623),
(93644),
(96491),
(96499),
(96503),
(97359),
(97493),
(97501),
(97560),
(97581),
(98204),
(98718),
(98727),
(100332),
(100333),
(101282),
(101542),
(101573),
(101821),
(102346),
(102349),
(102350),
(102488),
(102514),
(103081),
(103195),
(103196),
(107203),
(107516),
(107517),
(107842),
(107844),
(107845),
(110039),
(110051),
(113120),
(113199),
(118089),
(118737),
(120043),
(120395),
(120822),
(171847),
(121820),
(121836),
(121837),
(121838),
(121839),
(122708),
(123182),
(123886),
(123992),
(123993),
(124408),
(124550),
(124659),
(126507),
(126508),
(127154),
(127156),
(127158),
(127161),
(127164),
(127165),
(127169),
(127170),
(127174),
(127176),
(127177),
(127209),
(127213),
(127216),
(127220),
(127271),
(127286),
(127287),
(127288),
(127289),
(127290),
(127293),
(127295),
(127302),
(127308),
(127310),
(129552),
(129918),
(129932),
(129934),
(129935),
(130086),
(130092),
(130137),
(130138),
(130965),
(130985),
(132036),
(132117),
(132118),
(132119),
(133023),
(134359),
(134573),
(135416),
(135418),
(136163),
(136164),
(136400),
(136471),
(136505),
(138423),
(138424),
(138425),
(138426),
(138640),
(138641),
(138642),
(138643),
(139407),
(139442),
(139448),
(139595),
(140249),
(140250),
(142073),
(142266),
(142478),
(142641),
(142878),
(146615),
(146622),
(148392),
(148396),
(148417),
(148428),
(148476),
(148618),
(148619),
(148620),
(148970),
(148972),
(149801),
(153489),
(163024),
(163025),
(155741),
(169952),
(170347),
(171436),
(171617),
(171620),
(171621),
(171622),
(171623),
(171624),
(171625),
(171626),
(171627),
(171629),
(171632),
(171634),
(171635),
(171636),
(171637),
(171638),
(171824),
(171825),
(171828),
(171829),
(171830),
(171831),
(171832),
(171833),
(171834),
(171835),
(171836),
(171838),
(171839),
(171841),
(171842),
(171843),
(171844),
(171845),
(171846),
(171848),
(171849),
(171851),
(175700),
(179244),
(179245),
(179478),
(180545);

INSERT INTO `account_mounts` (`accountId`, `spell`, `favorite`)
SELECT DISTINCT `chars`.`account`, `characters`.`character_spell`.`spell`, 0 FROM `characters`.`character_spell`
JOIN `characters`.`characters` `chars` ON `chars`.`guid` = `characters`.`character_spell`.`guid`
WHERE `characters`.`character_spell`.`spell` IN (SELECT `spell` FROM `temp_mounts`);

DELETE FROM `characters`.`character_spell` WHERE `spell` IN (SELECT `spell` FROM `temp_mounts`);
DROP TABLE IF EXISTS `temp_mounts`;

REPLACE INTO `account_mounts` (`accountId`, `spell`, `favorite`)
SELECT DISTINCT `accountId`, `factionSpells`.`horde_id`, 0 FROM `account_mounts`
JOIN `world`.`player_factionchange_spells` `factionSpells` ON `factionSpells`.`alliance_id` = `account_mounts`.`spell`;

REPLACE INTO `account_mounts` (`accountId`, `spell`, `favorite`)
SELECT DISTINCT `accountId`, `factionSpells`.`alliance_id`, 0 FROM `account_mounts`
JOIN `world`.`player_factionchange_spells` `factionSpells` ON `factionSpells`.`horde_id` = `account_mounts`.`spell`;
